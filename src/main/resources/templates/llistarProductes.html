<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <title>Productes</title>
        <!-- Bootstrap -->
        <script src="../webjars/bootstrap/5.1.3/js/bootstrap.min.js"></script>
        <link href="../webjars/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body>

    <br>
    <div class="d-flex justify-content-around">
        <header>
            <h1>Productes</h1>
        </header>
        <header></header>
    </div>
    <div class="d-flex justify-content-around">
            <!--Si hi han productes mostrem la taula-->
            <div th:if="${productes!=null && !productes.empty}" class="table-responsive-md">
                <table border="1" class="table table-bordered align-middle table-sm caption-top">
                    <caption>
                        <a th:href="@{/crearProducte}">
                            <button type="button" class="btn btn-outline-primary" th:text="#{producte.crearProducte}"></button>
                        </a>
                    </caption>
                    <thead>
                        <tr>
                            <th>Id Producte</th>
                            <th>Nom</th>
                            <th>Marca</th>
                            <th>Preu</th>
                            <th>Categoria</th>
                            <th>Accions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="producte : ${productes}">
                            <td th:text="${producte.idProducte}"></td>
                            <td th:text="${producte.nom}"></td>
                            <td th:text="${producte.marca}"></td>
                            <td th:text="${producte.preuVenda}"></td>
                            <!-- Recorrem el llistat "categories" obtingut en el controlador: comprovem si el "id" de la
                            categoria correspon al "categoriaId" del producte, en cas positiu mostrem el nom de la categoria
                            a la celÂ·la-->
                            <td th:each="categoria : ${categories}" th:if="${categoria.idCategoria == producte.categoriaId}" th:text="${categoria.nom}"></td>
                            <td>
                                <div class="badge bg-primary text-wrap" style="width: 6rem;">
                                <a th:href="@{/editarProducte/}+${producte.idProducte}" style="color:white; text-decoration: none;">Detalls</a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        

            <!--Si no hi han productes mostrem un missatge-->
            <div th:if="${productes==null || productes.empty}">
                <p class="font-monospace">No hi ha productes</p>
            </div>
    </div>

    </body>
</html>